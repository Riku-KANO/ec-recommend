# DynamoDB Table Definitions

Sessions:
  TableName: ec-recommend-sessions
  BillingMode: PAY_PER_REQUEST
  AttributeDefinitions:
    - AttributeName: session_id
      AttributeType: S
  KeySchema:
    - AttributeName: session_id
      KeyType: HASH
  TimeToLiveSpecification:
    AttributeName: expires_at
    Enabled: true
  StreamSpecification:
    StreamViewType: NEW_AND_OLD_IMAGES

Carts:
  TableName: ec-recommend-carts
  BillingMode: PAY_PER_REQUEST
  AttributeDefinitions:
    - AttributeName: user_id
      AttributeType: S
    - AttributeName: product_id
      AttributeType: S
  KeySchema:
    - AttributeName: user_id
      KeyType: HASH
    - AttributeName: product_id
      KeyType: RANGE
  TimeToLiveSpecification:
    AttributeName: expires_at
    Enabled: true

UserPreferences:
  TableName: ec-recommend-user-preferences
  BillingMode: PAY_PER_REQUEST
  AttributeDefinitions:
    - AttributeName: user_id
      AttributeType: S
  KeySchema:
    - AttributeName: user_id
      KeyType: HASH

UserActivities:
  TableName: ec-recommend-user-activities
  BillingMode: PAY_PER_REQUEST
  AttributeDefinitions:
    - AttributeName: user_id
      AttributeType: S
    - AttributeName: timestamp
      AttributeType: N
    - AttributeName: activity_type
      AttributeType: S
    - AttributeName: product_id
      AttributeType: S
  KeySchema:
    - AttributeName: user_id
      KeyType: HASH
    - AttributeName: timestamp
      KeyType: RANGE
  GlobalSecondaryIndexes:
    - IndexName: activity_type-timestamp-index
      KeySchema:
        - AttributeName: activity_type
          KeyType: HASH
        - AttributeName: timestamp
          KeyType: RANGE
      Projection:
        ProjectionType: ALL
    - IndexName: product_id-timestamp-index
      KeySchema:
        - AttributeName: product_id
          KeyType: HASH
        - AttributeName: timestamp
          KeyType: RANGE
      Projection:
        ProjectionType: ALL
  StreamSpecification:
    StreamViewType: NEW_AND_OLD_IMAGES